{
  "pluginAlias": "2NIntercom",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Homebridge 2N Intercom Plugin - Complete solution for 2N intercoms with door control, video streaming, and doorbell notifications",
  "footerDisplay": "For help and support visit: [GitHub Repository](https://github.com/mastalir1980/homebridge-2n-intercom)",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "2N Intercom",
        "required": true,
        "description": "Name for this platform instance"
      },
      "host": {
        "title": "2N Intercom IP Address",
        "type": "string",
        "format": "ipv4",
        "required": true,
        "placeholder": "192.168.1.100",
        "description": "IP address of your 2N intercom device"
      },
      "user": {
        "title": "Username",
        "type": "string",
        "required": true,
        "placeholder": "admin",
        "description": "Username for 2N intercom authentication"
      },
      "pass": {
        "title": "Password",
        "type": "string",
        "required": true,
        "description": "Password for 2N intercom authentication"
      },
      "doorSwitchNumber": {
        "title": "Door Relay Number",
        "type": "integer",
        "default": 1,
        "minimum": 1,
        "maximum": 4,
        "required": true,
        "oneOf": [
          { "title": "Relay 1", "enum": [1] },
          { "title": "Relay 2", "enum": [2] },
          { "title": "Relay 3", "enum": [3] },
          { "title": "Relay 4", "enum": [4] }
        ],
        "description": "Select which relay controls your door lock (1-4)"
      },
      "enableDoorbell": {
        "title": "Enable Doorbell Notifications",
        "type": "boolean",
        "default": true,
        "description": "Enable doorbell button press notifications in HomeKit"
      },
      "doorbellFilterPeer": {
        "title": "Filter Doorbell by Caller",
        "type": "string",
        "placeholder": "sip:4374834473@proxy.my2n.com:5061",
        "description": "Optional: Filter doorbell notifications to respond only to a specific SIP peer/caller. Leave empty to respond to all calls. To find available peers, check your intercom's Phone Config at: https://YOUR_INTERCOM_IP/api/phone/config (requires authentication). Use the SIP number and domain from the account you want to monitor (e.g., sip:4374834473@proxy.my2n.com:5061)."
      },
      "videoQuality": {
        "title": "Video Stream Quality",
        "type": "string",
        "default": "vga",
        "required": true,
        "oneOf": [
          {
            "title": "VGA (640x480@15fps) - Recommended",
            "enum": ["vga"],
            "description": "Native 2N resolution, fastest startup, lowest bandwidth"
          },
          {
            "title": "HD Standard (Apple Default)",
            "enum": ["hd"],
            "description": "Standard Apple HomeKit quality, higher bandwidth"
          }
        ],
        "description": "Choose video stream quality. VGA is recommended for optimal performance."
      },
      "snapshotRefreshInterval": {
        "title": "Snapshot Refresh Interval (seconds)",
        "type": "number",
        "default": 30,
        "minimum": 10,
        "maximum": 300,
        "description": "How often HomeKit requests fresh snapshots (10-300 seconds). Higher values = less load, fewer black screens."
      },
      "protocol": {
        "title": "Connection Protocol",
        "type": "string",
        "default": "https",
        "oneOf": [
          {
            "title": "HTTPS (Recommended)",
            "enum": ["https"],
            "description": "Secure HTTPS connection (default for modern 2N intercoms)"
          },
          {
            "title": "HTTP",
            "enum": ["http"],
            "description": "Unsecure HTTP connection (legacy intercoms only)"
          }
        ],
        "description": "Choose connection protocol. HTTPS is recommended for security."
      },
      "verifySSL": {
        "title": "Verify SSL Certificates",
        "type": "boolean",
        "default": false,
        "description": "Enable SSL certificate verification for HTTPS connections. Disable for self-signed certificates (recommended for most 2N intercoms)."
      }
    },
    "required": ["name", "host", "user", "pass"]
  },
  "layout": [
    {
      "type": "section",
      "title": "Basic Configuration",
      "expandable": true,
      "expanded": true,
      "items": [
        "name",
        "host",
        "user",
        "pass"
      ]
    },
    {
      "type": "section", 
      "title": "Device Settings",
      "expandable": true,
      "expanded": true,
      "items": [
        "doorSwitchNumber",
        "enableDoorbell",
        "doorbellFilterPeer",
        "protocol",
        "verifySSL"
      ]
    },
    {
      "type": "section",
      "title": "Video Configuration", 
      "expandable": true,
      "expanded": true,
      "items": [
        "videoQuality",
        "snapshotRefreshInterval"
      ]
    }
  ]
}